<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:chart="ssen.components.mxChartSupportClasses.pieChartElements.*"

		 initialize="init(event)">
	<fx:Script>
		<![CDATA[
		import mx.collections.ArrayList;
		import mx.collections.IList;
		import mx.events.FlexEvent;

		import ssen.common.MathUtils;

		[Bindable]
		private var data:IList;

		private function init(event:FlexEvent):void {
			refresh();
		}

		private function refresh():void {
			var arr:Array = [];

			var f:int = -1;
			var fmax:int = MathUtils.rand(3, 7);
			while (++f < fmax) {
				arr.push({LABEL: "Label" + f, VALUE: MathUtils.rand(100, 300), HIGHLIGHT: Math.random() > 0.8});
			}

			data = new ArrayList(arr);
		}

		private function highlightFunction(data:Object):Boolean {
			return data["HIGHLIGHT"] === true;
		}

		//		private function chartDataTipFunction(hitData:HitData):DataTipItem {
		//			var item:DataTipItem = new DataTipItem;
		//			var data:Object = hitData.chartItem.item;
		//
		//			item.title = data["LABEL"];
		//			item.addDataTip("VALUE", data["VALUE"]);
		//			item.addDataTip("TEST1", "HELLO");
		//			item.addDataTip("TEST2", "WORLD");
		//			return item;
		//		}
		]]>
	</fx:Script>

	<mx:PieChart dataProvider="{data}"
				 height="400"
				 width="400"
				 x="30"
				 y="30"
				 showDataTips="true">
		<mx:series>
			<chart:PieHighlightWedgeSeries field="VALUE" highlightFunction="highlightFunction" nameField="LABEL"/>
		</mx:series>
	</mx:PieChart>

	<s:Button label="Refresh" left="10" top="10" click="refresh()"/>
</s:Group>
